{% extends "base.html" %}
{% block title %}Write an Article{% endblock %}
{% block content %}
    <div class="write-container">
        <h1>Write an Article</h1>
        <form method="POST" enctype="multipart/form-data">
            <label for="subtopic">Subtopic:</label>
            <input type="text" id="subtopic" name="subtopic" required>
            <label for="content">Content:</label>
            <textarea id="content" name="content" rows="10" required></textarea>
            <label for="images">Upload Images (optional):</label>
            <input type="file" id="images" name="images" accept="image/png, image/jpeg, image/gif">
            <button type="submit">Submit Article</button>
        </form>
        {% if my_articles %}
            <h2>Your Approved Articles</h2>
            {% for article in my_articles %}
                <div class="article-preview">
                    <h3>{{ article.subtopic }}</h3>
                    <p>{{ article.content|truncate(100) }}</p>
                    {% if article.image_filename %}
                        <img src="{{ url_for('static', filename='images/' + article.image_filename) }}" alt="Article Image" style="max-width: 200px;">
                    {% endif %}
                    <p><small>Posted on {{ article.created_at }}</small></p>
                </div>
            {% endfor %}
        {% else %}
            <p>No approved articles yet.</p>
        {% endif %}
    </div>
{% endblock %}